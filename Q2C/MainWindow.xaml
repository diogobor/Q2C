<Window x:Class="Q2C.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Q2C"
        xmlns:project_module="clr-namespace:Q2C.Viewer.Project"
        xmlns:machine_module="clr-namespace:Q2C.Viewer.Machine"
        mc:Ignorable="d"
        KeyDown="Window_KeyDown"
        Title="Q2C" Icon="/icons/q2c_icon.png" MinHeight="600" MinWidth="800" WindowStartupLocation="CenterScreen" WindowState="Maximized">
    <Window.InputBindings>
        <KeyBinding Key="F4" Modifiers="Alt" Command="{Binding CloseWindowCommand}"/>
        <KeyBinding Key="Q" Modifiers="Shift" Command="{Binding StatisticsQueueCommand}"/>
        <KeyBinding Key="E" Modifiers="Shift" Command="{Binding StatisticsEvaluationCommand}"/>
        <KeyBinding Key="U" Modifiers="Shift" Command="{Binding UsersCommand}"/>
        <KeyBinding Key="M" Modifiers="Shift" Command="{Binding MachinesCommand}"/>
        <KeyBinding Key="D" Modifiers="Shift" Command="{Binding DatabaseCommand}"/>
        <KeyBinding Key="F1" Command="{Binding ReadMeCommand}"/>
    </Window.InputBindings>
    <Window.Resources>
        <Style x:Key="CustomProgressBarStyle" TargetType="ProgressBar">
            <Setter Property="Foreground" Value="#478288"/>
        </Style>
    </Window.Resources>
    <Grid x:Name="MainGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>
        <Menu Grid.Row="0">
            <MenuItem Header="_File">
                <MenuItem 
                    Header="_Exit" Click="MenuItemExit_Click" InputGestureText="Alt+F4">
                    <MenuItem.Icon>
                        <Image Source="/icons/exit.png" />
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem x:Name="ToolsMenu" Header="_Tools">
                <MenuItem x:Name="StatisticsMenu" Header="_Statistical analysis">
                    <MenuItem.Icon>
                        <Image Source="/icons/statistics.png" />
                    </MenuItem.Icon>
                    <MenuItem Header="_Queue" InputGestureText="Shift+Q"
                              Click="MenuItemStatisticsQueue_Click">
                        <MenuItem.Icon>
                            <Image Source="/icons/queue.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="_Machines Evaluation" InputGestureText="Shift+E"
                              Click="MenuItemStatisticsEvaluation_Click">
                        <MenuItem.Icon>
                            <Image Source="/icons/evaluation.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
                <Separator x:Name="Setup_separator"/>
                <MenuItem x:Name="SetupMenu" Header="_Setup">
                    <MenuItem.Icon>
                        <Image Source="/icons/setup.png" />
                    </MenuItem.Icon>
                    <MenuItem Header="_Database" InputGestureText="Shift+D"
                          Click="MenuItem_Database">
                        <MenuItem.Icon>
                            <Image Source="/icons/db_icon.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="_Users" InputGestureText="Shift+U"
                          Click="MenuItem_Users">
                        <MenuItem.Icon>
                            <Image Source="/icons/userIcon.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="_Machines" InputGestureText="Shift+M"
                          Click="MenuItem_Machines">
                        <MenuItem.Icon>
                            <Image Source="/icons/machine.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="_Read me" InputGestureText="F1"
                          Click="MenuItem_ReadMe">
                    <MenuItem.Icon>
                        <Image Source="/icons/help.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="_Check for updates"
                          Click="MenuItem_CheckForUpdates">
                    <MenuItem.Icon>
                        <Image Source="/icons/update.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="_Discussion forum"
                          Click="MenuItem_DiscussionForum">
                    <MenuItem.Icon>
                        <Image Source="/icons/group_meeting.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <Separator/>
                <MenuItem Header="_About Q2C"
                          Click="MenuItem_About">
                    <MenuItem.Icon>
                        <Image Source="/icons/q2c_icon.png" />
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
        </Menu>
        <GroupBox Grid.Row="1"
            Header=""
            Margin="0,0,0,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="130"/>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="User:"
                           Margin="0,0,0,0"
                           Grid.Column="0"
                           Grid.Row="0"/>
                <TextBlock Text="---"
                           Grid.Column="1"
                           Grid.Row="0"
                           x:Name="TBUser"
                           Margin="10,0,0,0"
                           FontWeight="Bold"/>

                <TextBlock x:Name="LabelLastUpdate"
                           Text="Last updated:"
                           Grid.Row="1"
                           Margin="0,5,0,0"/>
                <TextBlock Text="---"
                           x:Name="LastUpdate"
                           Grid.Row="1"
                           Grid.Column="1"
                           Grid.ColumnSpan="3"
                           Margin="10,5,0,0"/>
                <ProgressBar 
                    x:Name="ProgressBarRefresh" 
                    Grid.Row="1"
                    Grid.Column="3"
                    Width="60"
                    Height="10"
                    Margin="0,5,0,0"
                    Style="{StaticResource CustomProgressBarStyle}">
                </ProgressBar>
            </Grid>
        </GroupBox>
        <TabControl Grid.Row="2"
                    Grid.ColumnSpan="3"
                    x:Name="control_tab">
            <TabItem Header="Projects">
                <project_module:UCAllProjects x:Name="_Projects"/>
            </TabItem>
            <TabItem Header="Machines">
                <machine_module:UCAllMachines x:Name="_Machines"/>
            </TabItem>
        </TabControl>
        <DockPanel Grid.Row="3">
            <StatusBar DockPanel.Dock="Bottom">
                <StatusBarItem>
                    <TextBlock Name="InfoLabLabel">All rights reserved!</TextBlock>
                </StatusBarItem>
            </StatusBar>
        </DockPanel>
    </Grid>
</Window>
